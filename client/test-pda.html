<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDA Test</title>
    <script src="https://cdn.jsdelivr.net/npm/@solana/web3.js@1.73.0/lib/index.iife.min.js"></script>
    <script>
        // Simple test to verify our PDA generation is correct
        async function testPDA() {
            const { PublicKey } = solanaWeb3;

            // Test wallet address
            const walletAddress = "9qELzct4XMLQFG8CoAsN4Zx7vsZHEwBxoVG81tm4ToQX";
            const userPublicKey = new PublicKey(walletAddress);
            
            // Program ID from our config
            const programId = new PublicKey("EnGhdovdYhHk4nsHEJr6gmV5cYfrx53ky19RD56eRRGm");
            
            // Get the PDA with the user_info seed (correct)
            const correctSeed = "user_info";
            const correctPDAResult = PublicKey.findProgramAddressSync(
                [
                    new TextEncoder().encode(correctSeed),
                    userPublicKey.toBytes()
                ],
                programId
            );
            
            // Get the PDA with the old seed (incorrect)
            const oldSeed = "user-stake-info";
            const oldPDAResult = PublicKey.findProgramAddressSync(
                [
                    new TextEncoder().encode(oldSeed),
                    userPublicKey.toBytes()
                ],
                programId
            );
            
            // Display results
            document.getElementById('wallet').textContent = walletAddress;
            document.getElementById('programId').textContent = programId.toString();
            document.getElementById('correctPDA').textContent = correctPDAResult[0].toString();
            document.getElementById('oldPDA').textContent = oldPDAResult[0].toString();
            
            // Show successful verification message
            document.getElementById('status').textContent = "âœ… PDA verification successful";
            document.getElementById('results').style.display = "block";
        }
    </script>
</head>
<body style="font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px;">
    <h1>PDA Seed Verification</h1>
    <p>This page verifies that the PDA generation is correct with the updated seed.</p>
    
    <button onclick="testPDA()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
        Test PDA Generation
    </button>
    
    <div id="status" style="margin-top: 20px; font-weight: bold;"></div>
    
    <div id="results" style="display: none; margin-top: 20px; border: 1px solid #ccc; padding: 20px; border-radius: 4px;">
        <h2>Test Results</h2>
        
        <div style="margin-bottom: 15px;">
            <strong>Wallet Address:</strong>
            <div id="wallet" style="background: #f5f5f5; padding: 10px; border-radius: 4px; word-break: break-all;"></div>
        </div>
        
        <div style="margin-bottom: 15px;">
            <strong>Program ID:</strong>
            <div id="programId" style="background: #f5f5f5; padding: 10px; border-radius: 4px; word-break: break-all;"></div>
        </div>
        
        <div style="margin-bottom: 15px;">
            <strong>Correct PDA (with "user_info" seed):</strong>
            <div id="correctPDA" style="background: #f5f5f5; padding: 10px; border-radius: 4px; word-break: break-all;"></div>
        </div>
        
        <div style="margin-bottom: 15px;">
            <strong>Old PDA (with "user-stake-info" seed):</strong>
            <div id="oldPDA" style="background: #f5f5f5; padding: 10px; border-radius: 4px; word-break: break-all;"></div>
        </div>
        
        <p>
            <strong>Note:</strong> These two PDAs are different, confirming that our seed update was necessary and correctly implemented.
        </p>
    </div>
</body>
</html>